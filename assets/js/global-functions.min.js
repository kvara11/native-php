
(function($,undefined){$.fn.getCursorPosition=function(){var el=$(this).get(0);var pos=0;if('selectionStart'in el){pos=el.selectionStart;}else if('selection'in document){el.focus();var Sel=document.selection.createRange();var SelLength=document.selection.createRange().text.length;Sel.moveStart('character',-el.value.length);pos=Sel.text.length-SelLength;}
	return pos;}})(jQuery);(function($,undefined){$.fn.setCursorPosition=function(pos){this.each(function(index,elem){if(elem.setSelectionRange){elem.setSelectionRange(pos,pos);}else if(elem.createTextRange){var range=elem.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}});return this;};})(jQuery);var Frmt={phone:function(string)
{var str=string||'',v=str.replace(/\D/g,'');if(v.length>3){v=v.substr(0,3)+'-'+v.substr(3);if(v.length>7){v=v.substr(0,4)+v.substr(4,3)+'-'+v.substr(7);}}
	return v;},_phone:function(string)
{var str=string||'';var v=str.replace(/\D/g,'');if(v.length==10){v=v.substr(0,3)+'-'+v.substr(3,3)+'-'+v.substr(6,4);return v;}else{return str;}},ssn:function(string)
{var str=string||'',v=str.replace(/\D/g,'');str=v;if(str.length>3){v=str.substr(0,3)+'-'+str.substr(3);if(v.length>6){v=str.substr(0,3)+'-'+str.substr(3,2)+'-'+str.substr(5);}}
	return v;},_ssn:function(string)
{var str=string||'';if(str.length==9){str=str.substr(0,3)+'-'+str.substr(3,2)+'-'+str.substr(5,4);}else{}},fedTaxId:function(string)
{var val=string||'';val=val.replace(/\D/g,'');if(val.length>2){val=val.substr(0,2)+'-'+val.substr(2);}
	return val;},_fedTaxId:function(string)
{var val=string||'';if(val.length>=9){val=val.substr(0,2)+'-'+val.substr(2);}
	return val;},acct:function(string)
{var val=string||'',new_val='';val=val.replace(/\D/g,'');for(var i=0;i<val.length/4;i++){new_val+=val.substr(i*4,4)+'-';}
	new_val=new_val.replace(/-$/,'');return new_val;},_acct:function(string)
{var val=string||'';if(val.length==16){val=val.substr(0,4)+'-'+
	val.substr(4,4)+'-'+
	val.substr(8,4)+'-'+
	val.substr(12,4);return val;}else{return val;}},money:function(string,decimal,only_allow_decimal)
{var v=string||'',d=decimal||0,allow=only_allow_decimal||false,d_val='',allowed_decimal='',allowed_found=false;if(allow&&/\./.test(v)){allowed_found=true;var tmp=v.split('.');v=tmp[0];allowed_decimal=tmp[1];}
	v=v.replace(/\D/g,"");v=parseInt(v).toString();v=v.split("").reverse().join("");if(d>0&&!allow){d_val=v.substr(0,2);if(d_val.length==1){d_val=d_val+'0';}
	v=v.substr(2);}
	if(v.length>0){var s=v.match(/\d{1,3}/g);v=s.join(',');}
	if(d>0&&!allow){if(v.length>0){v=d_val+'.'+v;}else{v=d_val+'.'+'0';}}
	v=v.split("").reverse().join("");if(allow&&allowed_found){v=v+'.'+allowed_decimal;}
	return'$'+v;}};function Cursor(html_input_element_or_string)
{this.position=0;this.old_val='';this.$input=null;this.init=function(html_input_element_or_string){this.$input=$(html_input_element_or_string);this.old_val=this.$input.val();return this;};this.get=function()
{this.position=this.$input.getCursorPosition();this.old_val=this.$input.val();};this.set=function()
{var new_val=this.$input.val();var diff=new_val.length-this.old_val.length;if(diff<0){this.$input.setCursorPosition(this.position,this.position);}else{if(diff>0){this.position+=diff;}
	this.$input.setCursorPosition(this.position,this.position);}};if(html_input_element_or_string){return this.init(html_input_element_or_string);}}
var KeysPressed={current_code:null,getCode:function(jQuery_event,log_code)
{var code=(jQuery_event.keyCode||jQuery_event.which),log=log_code||false;this.current_code=code;if(log){console.log(code);}
	return code;},isInputNavigation:function(e)
{var event=e||null;if(event!=null){this.getCode(event);}
	return this.key('is-input-navigation');},key:function(block_type,passed_code)
{var bt=block_type||'none',code=passed_code||this.current_code||false;if(code===false){throw new Error('No code for KeyPressed.key');}
	if(bt=='none'){return false;}else if(bt=='is-input-navigation'){return(code==37||code==39||code==40||code==38||code==16||code==17||code==18||code==91||code==8);}
	return false;}};var Helpers={setKeyupModel:function(event,model,callback_func)
{var cb=callback_func||function(v){return v;};if(!KeysPressed.isInputNavigation(event)){var target=event.target,val=$(target).val(),cursor=new Cursor(target);cursor.get();val=cb(val);$(target).val(val);model.attributes[target.name]=val;cursor.set();}}};